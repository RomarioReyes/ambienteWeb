CREATE TABLE usuarios(
id serial primary key,
nombre text not null,
Apellidos text not null,
numero integer not null unique,
correo text not null unique,
direccion text not null,
cedula text not null unique,
contra text not null
);

CREATE TABLE categorias(
id serial primary key,
nombre text not null unique,
activo boolean default true
);

CREATE TABLE subcategorias(
id serial primary key,
nombre text not null unique,
id_categoria integer not null,
activo boolean default true,
CONSTRAINT fk_categoria FOREIGN KEY (id_categoria)
        REFERENCES categorias(id)	
);
CREATE TABLE productos(
id serial primary key,
sku text not null unique,
nombre text not null unique,
descripcion text not null,
imagen text not null,
id_categoria integer not null,
id_subcategoria integer default 1,
cantidad integer not null,
precio integer not null,
activo boolean default true,
CONSTRAINT fk_categoria FOREIGN KEY (id_categoria)
        REFERENCES categorias(id),
CONSTRAINT fk_subcateoria FOREIGN KEY (id_subcategoria)
        REFERENCES subcategorias(id)
);



CREATE TABLE carrito(
id serial primary key,
id_usuario integer not null,
id_producto integer not null,
fecha text not null,	
activo boolean default true,
CONSTRAINT fk_usuario FOREIGN KEY (id_usuario)
        REFERENCES usuarios(id),
CONSTRAINT fk_producto FOREIGN KEY (id_producto)
        REFERENCES productos(id)	
);
CREATE TABLE Compras(
id serial primary key,
id_usuario integer not null,
id_producto integer not null,
fecha text not null,
orden integer not null,
CONSTRAINT fk_usuario FOREIGN KEY (id_usuario)
        REFERENCES usuarios(id),
CONSTRAINT fk_producto FOREIGN KEY (id_producto)
        REFERENCES productos(id)

);